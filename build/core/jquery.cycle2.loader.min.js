/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20200917 */

!function(f){"use strict";f.extend(f.fn.cycle.defaults,{loader:!1}),f(document).on("cycle-bootstrap",function(e,c){var s;c.loader&&(s=c.API.add,c.API.add=function(e,o){var r=[];if("string"==f.type(e))e=e.trim();else if("array"===f.type(e))for(var n=0;n<e.length;n++)e[n]=f(e[n])[0];var d=(e=f(e)).length;if(!d)return;e.css("visibility","hidden").appendTo("body").each(function(e){var i=0,t=f(this),n=t.is("img")?t:t.find("img");if(t.data("index",e),!(n=n.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])')).length)return--d,void r.push(t);function a(){var e,n;0==--i&&(--d,e=t,"wait"==c.loader?(r.push(e),0===d&&(r.sort(l),s.apply(c.API,[r,o]),c.container.removeClass("cycle-loading"))):(n=f(c.slides[c.currSlide]),s.apply(c.API,[e,o]),n.show(),c.container.removeClass("cycle-loading")))}i=n.length,n.each(function(){this.complete?a():f(this).on("load",function(){a()}).on("error",function(){0==--i&&(c.API.log("slide skipped; img not loaded:",this.src),0==--d&&"wait"==c.loader&&s.apply(c.API,[r,o]))})})}),d&&c.container.addClass("cycle-loading");function l(e,n){return e.data("index")-n.data("index")}})})}(jQuery);