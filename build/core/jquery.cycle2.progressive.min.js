/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20200917 */

!function(d){"use strict";d.extend(d.fn.cycle.defaults,{progressive:!1}),d(document).on("cycle-pre-initialize",function(e,c){if(c.progressive){var l,i,n=c.API,r=n.next,t=n.prev,s=n.prepareTx,a=d.type(c.progressive);if("array"==a)l=c.progressive;else if(d.isFunction(c.progressive))l=c.progressive(c);else if("string"==a){if(i=d(c.progressive),!(l=i.html().trim()))return;if(/^(\[)/.test(l))try{l=d.parseJSON(l)}catch(e){return void n.log("error parsing progressive slides",e)}else(l=l.split(new RegExp(i.data("cycle-split")||"\n")))[l.length-1]||l.pop()}s&&(n.prepareTx=function(e,i){var n,r;e||0===l.length?s.apply(c.API,[e,i]):i&&c.currSlide==c.slideCount-1?(r=l[0],l=l.slice(1),c.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.API.advanceSlide(1)},50)}),c.API.add(r)):i||0!==c.currSlide?s.apply(c.API,[e,i]):(n=l.length-1,r=l[n],l=l.slice(0,n),c.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.currSlide=1,i.API.advanceSlide(-1)},50)}),c.API.add(r,!0))}),r&&(n.next=function(){var e,i=this.opts();l.length&&i.currSlide==i.slideCount-1?(e=l[0],l=l.slice(1),i.container.one("cycle-slide-added",function(e,i){r.apply(i.API),i.container.removeClass("cycle-loading")}),i.container.addClass("cycle-loading"),i.API.add(e)):r.apply(i.API)}),t&&(n.prev=function(){var e,i,n=this.opts();l.length&&0===n.currSlide?(e=l.length-1,i=l[e],l=l.slice(0,e),n.container.one("cycle-slide-added",function(e,i){i.currSlide=1,i.API.advanceSlide(-1),i.container.removeClass("cycle-loading")}),n.container.addClass("cycle-loading"),n.API.add(i,!0)):t.apply(n.API)})}})}(jQuery);