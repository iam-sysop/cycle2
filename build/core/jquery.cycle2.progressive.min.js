/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20190921 */

!function(d){"use strict";d.extend(d.fn.cycle.defaults,{progressive:!1}),d(document).on("cycle-pre-initialize",function(e,l){if(l.progressive){var c,i,n=l.API,r=n.next,s=n.prev,t=n.prepareTx,a=d.type(l.progressive);if("array"==a)c=l.progressive;else if(d.isFunction(l.progressive))c=l.progressive(l);else if("string"==a){if(i=d(l.progressive),!(c=d.trim(i.html())))return;if(/^(\[)/.test(c))try{c=d.parseJSON(c)}catch(e){return void n.log("error parsing progressive slides",e)}else(c=c.split(new RegExp(i.data("cycle-split")||"\n")))[c.length-1]||c.pop()}t&&(n.prepareTx=function(e,i){var n,r;e||0===c.length?t.apply(l.API,[e,i]):i&&l.currSlide==l.slideCount-1?(r=c[0],c=c.slice(1),l.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.API.advanceSlide(1)},50)}),l.API.add(r)):i||0!==l.currSlide?t.apply(l.API,[e,i]):(n=c.length-1,r=c[n],c=c.slice(0,n),l.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.currSlide=1,i.API.advanceSlide(-1)},50)}),l.API.add(r,!0))}),r&&(n.next=function(){var e=this.opts();if(c.length&&e.currSlide==e.slideCount-1){var i=c[0];c=c.slice(1),e.container.one("cycle-slide-added",function(e,i){r.apply(i.API),i.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(i)}else r.apply(e.API)}),s&&(n.prev=function(){var e=this.opts();if(c.length&&0===e.currSlide){var i=c.length-1,n=c[i];c=c.slice(0,i),e.container.one("cycle-slide-added",function(e,i){i.currSlide=1,i.API.advanceSlide(-1),i.container.removeClass("cycle-loading")}),e.container.addClass("cycle-loading"),e.API.add(n,!0)}else s.apply(e.API)})}})}(jQuery);